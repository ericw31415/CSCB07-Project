Index: app/src/main/java/ca/utoronto/cscb07project/ui/loginsignout/LoginSignoutActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ca.utoronto.cscb07project.ui.loginsignout;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentTransaction;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport ca.utoronto.cscb07project.R;\nimport ca.utoronto.cscb07project.ui.user.UserActivity;\n\npublic class LoginSignoutActivity extends AppCompatActivity implements LogInOutView{\n\n    LoginPresenter presenter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login_signout);\n        loadFragment(new LoginUserFragment());\n        presenter = new LoginPresenter(this);\n\n    }\n    private void loadFragment(Fragment fragment) {\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction transaction = fragmentManager.beginTransaction();\n        transaction.replace(R.id.userFrame, fragment);\n        transaction.addToBackStack(null);\n        transaction.commit();\n    }\n\n    public void tryLogin(View view) {\n        String email = ((TextView)findViewById(R.id.emailText)).getText().toString();\n        String password = ((TextView)findViewById(R.id.passwordText)).getText().toString();\n        presenter.tryLogin(email, password);\n    }\n\n    public void toSignOut(View view) {\n        presenter.tryLogOut();\n    }\n\n    @Override\n    public void successfulLogin() {\n        Intent intent = new Intent(this, UserActivity.class);\n        startActivity(intent);\n    }\n    @Override\n    public void unsuccessfulLogin() {\n        Toast.makeText(this, \"Wrong email or password\", Toast.LENGTH_SHORT).show();\n        Log.d(\"failure\", \"logged in not good\");\n    }\n\n    @Override\n    public void loggedOut() {\n        loadFragment(new LoginUserFragment());\n        Toast.makeText(this, \"You are logged out!\", Toast.LENGTH_SHORT).show();\n        Log.d(\"Log\", \"Logging Out\");\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/ca/utoronto/cscb07project/ui/loginsignout/LoginSignoutActivity.java b/app/src/main/java/ca/utoronto/cscb07project/ui/loginsignout/LoginSignoutActivity.java
--- a/app/src/main/java/ca/utoronto/cscb07project/ui/loginsignout/LoginSignoutActivity.java	(revision 410c732bc6956013e46ca0e5b26e01c113fab354)
+++ b/app/src/main/java/ca/utoronto/cscb07project/ui/loginsignout/LoginSignoutActivity.java	(date 1700857144977)
@@ -30,7 +30,7 @@
     private void loadFragment(Fragment fragment) {
         FragmentManager fragmentManager = getSupportFragmentManager();
         FragmentTransaction transaction = fragmentManager.beginTransaction();
-        transaction.replace(R.id.userFrame, fragment);
+        transaction.replace(R.id.loginFrame, fragment);
         transaction.addToBackStack(null);
         transaction.commit();
     }
Index: app/src/main/res/layout/activity_login_signout.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".ui.loginsignout.LoginSignoutActivity\"\n    android:orientation=\"vertical\">\n\n    <com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=\"@+id/bottomNavigationView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:menu=\"@menu/bottom_nav_menu\"/>\n\n    <FrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:id=\"@+id/userFrame\"\n        app:layout_constraintBottom_toTopOf=\"@+id/bottomNavigationView\"\n        tools:layout_editor_absoluteX=\"2dp\">\n    </FrameLayout>\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_login_signout.xml b/app/src/main/res/layout/activity_login_signout.xml
--- a/app/src/main/res/layout/activity_login_signout.xml	(revision 410c732bc6956013e46ca0e5b26e01c113fab354)
+++ b/app/src/main/res/layout/activity_login_signout.xml	(date 1700857138385)
@@ -20,7 +20,7 @@
     <FrameLayout
         android:layout_width="match_parent"
         android:layout_height="match_parent"
-        android:id="@+id/userFrame"
+        android:id="@+id/loginFrame"
         app:layout_constraintBottom_toTopOf="@+id/bottomNavigationView"
         tools:layout_editor_absoluteX="2dp">
     </FrameLayout>
Index: app/src/main/java/ca/utoronto/cscb07project/ui/user/UserActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ca.utoronto.cscb07project.ui.user;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentTransaction;\nimport androidx.lifecycle.ViewModelProvider;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.FirebaseUser;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\n\nimport ca.utoronto.cscb07project.R;\nimport ca.utoronto.cscb07project.ui.loginsignout.LoggedInFragment;\nimport ca.utoronto.cscb07project.ui.loginsignout.LoginSignoutActivity;\nimport ca.utoronto.cscb07project.ui.loginsignout.LoginUserFragment;\n\npublic class UserActivity extends AppCompatActivity {\n\n    private void loadFragment(Fragment fragment) {\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction transaction = fragmentManager.beginTransaction();\n        transaction.replace(R.id.userFrame, fragment);\n        transaction.addToBackStack(null);\n        transaction.commit();\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_user);\n        loadFragment(new LoggedInFragment());\n\n        UserDataViewModel userDataViewModel = new ViewModelProvider(this).get(UserDataViewModel.class);\n\n        FirebaseAuth mAuth = FirebaseAuth.getInstance();\n        FirebaseUser currentUser = mAuth.getCurrentUser();\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\n        DatabaseReference userRef = database.getReference(\"users\").child(currentUser.getUid());\n\n        userRef.addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(DataSnapshot dataSnapshot) {\n                if (dataSnapshot.exists()) {\n                    String firstName = dataSnapshot.child(\"fName\").getValue(String.class);\n                    String lastName = dataSnapshot.child(\"lName\").getValue(String.class);\n                    String email = dataSnapshot.child(\"email\").getValue(String.class);\n                    Boolean isAdmin = dataSnapshot.child(\"admin\").getValue(Boolean.class);\n\n                    userDataViewModel.setUserInfo(firstName, lastName, email, isAdmin);\n\n                    if (isAdmin) {\n                        loadFragment(new AdminHome());\n                    } else {\n                        loadFragment(new UserHome());\n                    }\n                } else {\n                    Log.d(\"User Data\", \"DataSnapshot does not exist\");\n                }\n            }\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n                Log.d(\"Error\", \"Database Error: \" + error.getMessage());\n            }\n        });\n    }\n    public void logOut(View view) {\n        FirebaseAuth auth = FirebaseAuth.getInstance();\n        auth.signOut();\n        Intent intent = new Intent(this, LoginSignoutActivity.class);\n        startActivity(intent);\n        Toast.makeText(this, \"You are logged out!\", Toast.LENGTH_SHORT).show();\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/ca/utoronto/cscb07project/ui/user/UserActivity.java b/app/src/main/java/ca/utoronto/cscb07project/ui/user/UserActivity.java
--- a/app/src/main/java/ca/utoronto/cscb07project/ui/user/UserActivity.java	(revision 410c732bc6956013e46ca0e5b26e01c113fab354)
+++ b/app/src/main/java/ca/utoronto/cscb07project/ui/user/UserActivity.java	(date 1700857138387)
@@ -11,7 +11,6 @@
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
-import android.widget.TextView;
 import android.widget.Toast;
 
 import com.google.firebase.auth.FirebaseAuth;
@@ -25,14 +24,13 @@
 import ca.utoronto.cscb07project.R;
 import ca.utoronto.cscb07project.ui.loginsignout.LoggedInFragment;
 import ca.utoronto.cscb07project.ui.loginsignout.LoginSignoutActivity;
-import ca.utoronto.cscb07project.ui.loginsignout.LoginUserFragment;
 
 public class UserActivity extends AppCompatActivity {
 
     private void loadFragment(Fragment fragment) {
         FragmentManager fragmentManager = getSupportFragmentManager();
         FragmentTransaction transaction = fragmentManager.beginTransaction();
-        transaction.replace(R.id.userFrame, fragment);
+        transaction.replace(R.id.loginFrame, fragment);
         transaction.addToBackStack(null);
         transaction.commit();
     }
Index: app/src/main/res/layout/activity_user.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".ui.user.UserActivity\">\n\n    <com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=\"@+id/bottomNavigationView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:menu=\"@menu/bottom_nav_menu\" />\n\n    <FrameLayout\n        android:id=\"@+id/userFrame\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:layout_constraintBottom_toTopOf=\"@+id/bottomNavigationView\"\n        tools:layout_editor_absoluteX=\"2dp\"></FrameLayout>\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_user.xml b/app/src/main/res/layout/activity_user.xml
--- a/app/src/main/res/layout/activity_user.xml	(revision 410c732bc6956013e46ca0e5b26e01c113fab354)
+++ b/app/src/main/res/layout/activity_user.xml	(date 1700857138389)
@@ -17,7 +17,7 @@
         app:menu="@menu/bottom_nav_menu" />
 
     <FrameLayout
-        android:id="@+id/userFrame"
+        android:id="@+id/loginFrame"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         app:layout_constraintBottom_toTopOf="@+id/bottomNavigationView"
Index: app/src/main/res/layout/activity_signup.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".ui.signup.SignupActivity\">\n\n    <com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=\"@+id/bottomNavigationView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:menu=\"@menu/bottom_nav_menu\" />\n\n    <FrameLayout\n        android:id=\"@+id/userFrame\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:layout_constraintBottom_toTopOf=\"@+id/bottomNavigationView\"\n        tools:layout_editor_absoluteX=\"2dp\"></FrameLayout>\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_signup.xml b/app/src/main/res/layout/activity_signup.xml
--- a/app/src/main/res/layout/activity_signup.xml	(revision 410c732bc6956013e46ca0e5b26e01c113fab354)
+++ b/app/src/main/res/layout/activity_signup.xml	(date 1700857138391)
@@ -17,7 +17,7 @@
         app:menu="@menu/bottom_nav_menu" />
 
     <FrameLayout
-        android:id="@+id/userFrame"
+        android:id="@+id/loginFrame"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         app:layout_constraintBottom_toTopOf="@+id/bottomNavigationView"
Index: app/src/main/java/ca/utoronto/cscb07project/ui/signup/SignupActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ca.utoronto.cscb07project.ui.signup;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentTransaction;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.Switch;\nimport android.widget.Toast;\n\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.FirebaseUser;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\n\nimport ca.utoronto.cscb07project.R;\nimport ca.utoronto.cscb07project.ui.loginsignout.LoginUserFragment;\n\npublic class SignupActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_signup);\n        loadFragment(new SignUpFragment());\n    }\n\n    private void loadFragment(Fragment fragment) {\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction transaction = fragmentManager.beginTransaction();\n        transaction.replace(R.id.userFrame, fragment);\n        transaction.addToBackStack(null);\n        transaction.commit();\n    }\n\n    public void signUp(View view) {\n        EditText email = findViewById(R.id.emailAddress);\n        EditText firstName = findViewById(R.id.firstName);\n        EditText lastName = findViewById(R.id.lastName);\n        EditText password = findViewById(R.id.password);\n        Switch adminSwitch = findViewById(R.id.adminSwitch);\n\n        String userEmail = email.getText().toString();\n        String userFirstName = firstName.getText().toString();\n        String userLastName = lastName.getText().toString();\n        String userPassword = password.getText().toString();\n        boolean isAdmin = adminSwitch.isChecked();\n\n        createUser(new UserModel(userEmail, userPassword, userFirstName, userLastName, isAdmin));\n    }\n\n    public void createUser(UserModel user){\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\n        DatabaseReference usersRef = database.getReference(\"users\");\n        FirebaseAuth auth = FirebaseAuth.getInstance();\n\n        auth.createUserWithEmailAndPassword(user.getEmail(), user.getPassword())\n                .addOnCompleteListener(this, task -> {\n                    if(task.isSuccessful()){\n                        FirebaseUser fUser = auth.getCurrentUser();\n                        usersRef.child(fUser.getUid()).setValue(user)\n                                .addOnSuccessListener(this, newTask ->{\n                                    Log.d(\"Success\", \"Success\");\n                                })\n                                .addOnFailureListener(userCreateError -> {\n                                    Log.d(\"error\", \"Error adding node\");\n                                });\n                    }\n                    else{\n                        Log.d(\"error\", \"error\");\n                    }\n                });\n        loadFragment(new LoginUserFragment());\n        Toast.makeText(this, \"Account Created! Login!\", Toast.LENGTH_SHORT).show();\n    }\n\n\n\n\n\n\n\n\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/ca/utoronto/cscb07project/ui/signup/SignupActivity.java b/app/src/main/java/ca/utoronto/cscb07project/ui/signup/SignupActivity.java
--- a/app/src/main/java/ca/utoronto/cscb07project/ui/signup/SignupActivity.java	(revision 410c732bc6956013e46ca0e5b26e01c113fab354)
+++ b/app/src/main/java/ca/utoronto/cscb07project/ui/signup/SignupActivity.java	(date 1700857138392)
@@ -32,7 +32,7 @@
     private void loadFragment(Fragment fragment) {
         FragmentManager fragmentManager = getSupportFragmentManager();
         FragmentTransaction transaction = fragmentManager.beginTransaction();
-        transaction.replace(R.id.userFrame, fragment);
+        transaction.replace(R.id.loginFrame, fragment);
         transaction.addToBackStack(null);
         transaction.commit();
     }
